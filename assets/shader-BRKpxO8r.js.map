{"version":3,"file":"shader-BRKpxO8r.js","sources":["../../src/models/coffeeMug.jsx","../../src/shaders/coffeeMug/vertex.glsl","../../src/shaders/coffeeMug/fragment.glsl","../../src/shaders/coffeeMug/shader.jsx"],"sourcesContent":["import { useGLTF, useTexture } from \"@react-three/drei\"\r\nimport { useFrame } from \"@react-three/fiber\";\r\nimport { GLTFLoader } from 'three/examples/jsm/loaders/GLTFLoader';\r\n\r\nexport default function coffeeMugModel(args){\r\n    const model = useGLTF('models/coffeeMug/bakedModel.glb')\r\n    console.log(args);\r\n    \r\n    return <primitive object={model.scene} castShadow {...args}/>\r\n}\r\nuseGLTF.preload('models/LeePerrySmith/LeePerrySmith.glb')","varying vec2 vUv;\r\nuniform sampler2D uPerlinTexture;\r\nuniform float uTime;\r\n\r\n#include ../includes/rotate2D.glsl\r\nvoid main(){\r\n\r\n\r\n    vec3 newPosition = position;\r\n\r\n    //Twist\r\n    float twistPerlin = texture(\r\n        uPerlinTexture,\r\n        vec2(0.5, uv.y * 0.5 -uTime * 0.01)\r\n        ).r;\r\n    float angle = twistPerlin * 10.0;\r\n    newPosition.xz = rotate2D(newPosition.xz, angle);\r\n\r\n    //Wind \r\n    vec2 windOffset = vec2(\r\n        texture(uPerlinTexture, vec2(0.25, uTime * 0.01)).r -0.5,\r\n        texture(uPerlinTexture, vec2(0.75, uTime * 0.01)).r -0.5\r\n    );\r\n    windOffset *= 10.0 * pow( uv.y,2.0); \r\n    newPosition.xz += windOffset;\r\n\r\n    //final position\r\n    gl_Position = projectionMatrix * modelViewMatrix * vec4(newPosition,1.0);\r\n\r\n    //VARYINGS \r\n    vUv = uv; \r\n\r\n}","uniform sampler2D uPerlinTexture;\r\nuniform float uTime;\r\n\r\nvarying vec2 vUv;\r\nvoid main() {\r\n\r\n    //scale and animate     \r\n    vec2 smokeUv = vUv;\r\n    smokeUv.x *= 0.5;\r\n    smokeUv.y *= 0.3;\r\n    smokeUv -= uTime * 0.03;\r\n\r\n     //smoke\r\n    float smoke = texture(uPerlinTexture, smokeUv).r;\r\n\r\n    //remap smoke \r\n    smoke = smoothstep(0.4, 1.0, smoke);\r\n\r\n    //edges\r\n    smoke *= smoothstep(0.0, 0.1, vUv.x);\r\n    smoke *= smoothstep(1.0, 0.9, vUv.x);\r\n    smoke *= smoothstep(0.0, 0.1, vUv.y);\r\n    smoke *= smoothstep(1.0, 0.4, vUv.y);\r\n    //Final Color \r\n    gl_FragColor = vec4(1.0, 1.0, 1.0, smoke);\r\n    #include <tonemapping_fragment>\r\n    #include <colorspace_fragment>\r\n\r\n}","// CustomShaderMaterial.js\r\nimport * as THREE from \"three\";\r\nimport {\r\n  OrbitControls,\r\n  Float,\r\n  Text,\r\n  useGLTF,\r\n  shaderMaterial,\r\n  Sky,\r\n  Environment,\r\n} from \"@react-three/drei\";\r\n\r\nimport { useMemo, useState, useRef, Suspense } from \"react\";\r\nimport { useFrame, extend } from \"@react-three/fiber\";\r\nimport Placeholder from \"../../models/Placeholder\";\r\nimport CoffeeModel from \"../../models/coffeeMug\";\r\nimport VertexShader from \"./vertex.glsl\";\r\nimport FragmentShader from \"./fragment.glsl\";\r\nimport { useControls } from \"leva\";\r\n\r\n\r\nexport default function CoffeeMug() {\r\n  let uTime = 0;\r\n  const smokeGeometry = new THREE.PlaneGeometry(1, 1, 16, 64);\r\n  smokeGeometry.scale(0.75, 3, 0.75);\r\n  const textureLoader = new THREE.TextureLoader();\r\n  const perlinTexture = textureLoader.load(\"./textures/perlin.png\");\r\n  perlinTexture.wrapS = THREE.RepeatWrapping\r\n  perlinTexture.wrapT = THREE.RepeatWrapping\r\n  const smokeMaterial = new THREE.ShaderMaterial({\r\n    transparent: true,\r\n    depthWrite: false,\r\n    vertexShader: VertexShader,\r\n    fragmentShader: FragmentShader,\r\n    wireframe:false,\r\n    side: THREE.DoubleSide,\r\n    uniforms: {\r\n      uTime: new THREE.Uniform(0),\r\n      uPerlinTexture: new THREE.Uniform(perlinTexture),\r\n    },\r\n  });\r\n  useFrame((state, delta) => {\r\n    uTime = state.clock.elapsedTime ;\r\n    smokeMaterial.uniforms.uTime.value = uTime\r\n  });\r\n  \r\n\r\n  return (\r\n    <>\r\n      <mesh\r\n        geometry={smokeGeometry}\r\n        material={smokeMaterial}\r\n        // useRef={mesh}\r\n        // rotation={[Math.PI / 2, 0, 0]}\r\n        position={[0, 1.2, 0]}\r\n        // wireframe\r\n        // scale={new THREE.Vector3(4, 3, 1)}\r\n      ></mesh>\r\n      <ambientLight intensity={0.5}></ambientLight>\r\n      <directionalLight\r\n        castShadow\r\n        position={[4, 2, -2.25]}\r\n        intensity={10}\r\n      ></directionalLight>\r\n         <Environment\r\n        files={\"textures/environmentMaps/wood-cabin.hdr\"}\r\n        background\r\n        \r\n      ></Environment>\r\n      <Suspense fallback={<Placeholder position-y={0.5} scale={[2, 3, 2]} />}>\r\n        <CoffeeModel position-z={0} position-y={-1} scale={0.5}></CoffeeModel>\r\n      </Suspense>\r\n    </>\r\n  );\r\n}\r\n"],"names":["coffeeMugModel","args","model","useGLTF","jsx","vertex_default","fragment_default","CoffeeMug","uTime","smokeGeometry","THREE.PlaneGeometry","perlinTexture","THREE.TextureLoader","THREE.RepeatWrapping","smokeMaterial","THREE.ShaderMaterial","VertexShader","FragmentShader","THREE.DoubleSide","THREE.Uniform","useFrame","state","delta","jsxs","Fragment","Environment","Suspense","Placeholder","CoffeeModel"],"mappings":"qHAIA,SAAwBA,EAAeC,EAAK,CAClC,MAAAC,EAAQC,EAAQ,iCAAiC,EACvD,eAAQ,IAAIF,CAAI,EAETG,EAAA,IAAC,aAAU,OAAQF,EAAM,MAAO,WAAU,GAAE,GAAGD,EAAK,CAC/D,CACAE,EAAQ,QAAQ,wCAAwC,ECVxD,IAAAE,EAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GCAAC,EAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GCqBA,SAAwBC,GAAY,CAClC,IAAIC,EAAQ,EACZ,MAAMC,EAAgB,IAAIC,EAAoB,EAAG,EAAG,GAAI,EAAE,EAC5CD,EAAA,MAAM,IAAM,EAAG,GAAI,EAE3B,MAAAE,EADgB,IAAIC,EAAoB,EACV,KAAK,uBAAuB,EAChED,EAAc,MAAQE,EACtBF,EAAc,MAAQE,EAChB,MAAAC,EAAgB,IAAIC,EAAqB,CAC7C,YAAa,GACb,WAAY,GACZ,aAAcC,EACd,eAAgBC,EAChB,UAAU,GACV,KAAMC,EACN,SAAU,CACR,MAAO,IAAIC,EAAc,CAAC,EAC1B,eAAgB,IAAIA,EAAcR,CAAa,CAAA,CACjD,CACD,EACQ,OAAAS,EAAA,CAACC,EAAOC,IAAU,CACzBd,EAAQa,EAAM,MAAM,YACNP,EAAA,SAAS,MAAM,MAAQN,CAAA,CACtC,EAKGe,EAAA,KAAAC,WAAA,CAAA,SAAA,CAAApB,EAAA,IAAC,OAAA,CACC,SAAUK,EACV,SAAUK,EAGV,SAAU,CAAC,EAAG,IAAK,CAAC,CAAA,CAGrB,EACDV,EAAAA,IAAC,eAAa,CAAA,UAAW,EAAK,CAAA,EAC9BA,EAAA,IAAC,mBAAA,CACC,WAAU,GACV,SAAU,CAAC,EAAG,EAAG,KAAK,EACtB,UAAW,EAAA,CACZ,EACEA,EAAA,IAACqB,EAAA,CACF,MAAO,0CACP,WAAU,EAAA,CAEX,EACDrB,EAAAA,IAACsB,YAAS,SAAUtB,EAAA,IAACuB,GAAY,aAAY,GAAK,MAAO,CAAC,EAAG,EAAG,CAAC,CAAG,CAAA,EAClE,eAACC,EAAY,CAAA,aAAY,EAAG,aAAY,GAAI,MAAO,EAAK,CAAA,CAC1D,CAAA,CAAA,EACF,CAEJ"}